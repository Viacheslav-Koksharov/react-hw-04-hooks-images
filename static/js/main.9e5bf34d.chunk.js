(this["webpackJsonpreact-hw-04-hooks-images"]=this["webpackJsonpreact-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__2-GIi",toastify:"ImageGallery_toastify__3yBzn"}},12:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__UhUfi",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__pNQRr"}},13:function(e,t,a){e.exports={overlay:"Modal_overlay__qLTGJ",modal:"Modal_modal__2rhHX"}},25:function(e,t,a){e.exports={button:"Button_button__E0Hv0"}},32:function(e,t,a){},6:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__1vI-h",searchForm:"Searchbar_searchForm__1NlKB",searchFormButton:"Searchbar_searchFormButton__3Jrjc",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__2-NyG",searchFormInput:"Searchbar_searchFormInput__3_BkO","searchForm-input":"Searchbar_searchForm-input__3MWYp",toastify:"Searchbar_toastify__3m6fw"}},73:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a(0),n=a.n(c),o=a(7),s=a.n(o),i=(a(31),a(32),a(4)),l=a(5),u=(a(33),a(6)),m=a.n(u);function b(e){var t=e.onSubmit,a=Object(c.useState)(""),n=Object(i.a)(a,2),o=n[0],s=n[1];return Object(r.jsx)("header",{className:m.a.searchbar,children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===o.trim()&&l.b.error("Try again!",{className:"".concat(m.a.toastify)}),t(o),s("")},className:m.a.searchForm,children:[Object(r.jsx)("button",{type:"submit",className:m.a.searchFormButton,children:Object(r.jsx)("span",{className:m.a.searchFormButtonLabel,children:"Search"})}),Object(r.jsx)("input",{className:m.a.searchFormInput,type:"text",name:"searchQuery",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){s(e.currentTarget.value.toLowerCase())}})]})})}var h=a(14),j=a(11),d=a.n(j),f=a(23),g=a.n(f);var O=function(e,t){var a="".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("19246531-fc0b1c1353c7051ee5ebaba0f","&image_type=photo&orientation=horizontal&per_page=12");return g.a.get(a).then((function(e){return e.data.hits}))},p=a(24),_=a.n(p),y=(a(72),function(){return Object(r.jsx)(_.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:3e3})}),v=a(12),x=a.n(v),I=function(e){var t=e.id,a=e.webformatURL,c=e.tags;return Object(r.jsx)("li",{className:x.a.imageGalleryItem,children:Object(r.jsx)("img",{id:t,src:a,alt:c,className:x.a.imageGalleryItemImage})})},S=a(13),F=a.n(S),w=document.querySelector("#modal-root");function N(e){var t=e.children,a=e.onClose;Object(c.useEffect)((function(){var e=function(e){"Escape"===e.code&&a()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[a]);return Object(o.createPortal)(Object(r.jsx)("div",{className:F.a.overlay,onClick:function(e){e.target===e.currentTarget&&a()},children:Object(r.jsx)("div",{className:F.a.modal,children:t})}),w)}var G=a(25),k=a.n(G);function B(e){var t=e.onClick,a=e.page;return Object(r.jsx)("button",{className:k.a.button,type:"button",onClick:function(){t(a)},children:"Load more"})}function C(e){var t=e.searchQuery,a=e.page,n=Object(c.useState)(a),o=Object(i.a)(n,2),s=o[0],u=o[1],m=Object(c.useState)([]),b=Object(i.a)(m,2),j=b[0],f=b[1],g=Object(c.useState)("idle"),p=Object(i.a)(g,2),_=p[0],v=p[1],x=Object(c.useState)(null),S=Object(i.a)(x,2),F=S[0],w=S[1],G=Object(c.useState)(null),k=Object(i.a)(G,2),C=k[0],L=k[1],E=Object(c.useState)(!1),T=Object(i.a)(E,2),U=T[0],M=T[1];Object(c.useEffect)((function(){v("pending"),""!==t.trim()?O(t,a).then((function(e){if(0===e.length)return v("rejected"),void l.b.error("Try again!",{className:"".concat(d.a.toastify)});f(e),u(a+1),v("resolved")})).catch(R):v("idle")}),[t,a]);var R=function(e){v("rejected"),l.b.error(e.message)},J=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return"idle"===_||"rejected"===_?null:"pending"===_?Object(r.jsx)(y,{}):"resolved"===_&&j.length>0?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ul",{className:d.a.imageGallery,onClick:function(e){if("IMG"===e.target.nodeName){var t=j.find((function(t){return t.id===Number(e.target.id)}));M(!U),w(t.largeImageURL),L(t.tags)}},children:j.map((function(e){var t=e.id,a=e.webformatURL,c=e.tags;return Object(r.jsx)(I,{id:t,webformatURL:a,tags:c},t)}))}),Object(r.jsx)(B,{page:a,onClick:function(){O(t,s).then((function(e){f([].concat(Object(h.a)(j),Object(h.a)(e))),u(s+1),v("resolved"),J()})).catch(R)}}),U&&Object(r.jsx)(N,{onClose:function(){M(!U),w(null),L(null)},children:Object(r.jsx)("img",{src:F,alt:C})})]}):void 0}function L(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b,{onSubmit:n}),Object(r.jsx)(C,{searchQuery:a,page:1}),Object(r.jsx)(l.a,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:"true"})]})}s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(L,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.9e5bf34d.chunk.js.map